<!-- Remove this div if you want angular material css shadows -->
<div class="table-container">
    <table
        mat-table
        [dataSource]="$dataSource"
        class="mat-elevation-z8"
    >
        <caption style="display: none;">
            Task table
        </caption>
        <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns"
        ></tr>
        <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns; let i = index"
            (click)="selectRow(row)"
            [ngClass]="{'active-row': currentRow?.id === row?.id}"
        ></tr>
        <ng-container
            matColumnDef="title"
            sticky
        >
            <th
                scope="col"
                mat-header-cell
                *matHeaderCellDef
            > Task name </th>
            <td
                mat-cell
                *matCellDef="let element; let i = index"
                (click)="selectCell('title', element.title)"
                [ngClass]="{'active-element': isCurrentCellActive('title', element?.title)}"
            >
                <input
                    #titleInput
                    *ngIf="isCurrentCellActive('title', element?.title); else titleLabel"
                    type="text"
                    value="{{element?.title}}"
                    (focus)="editModeOn()"
                    (focusout)="undoTitleChanges(i ,titleInput.value)"
                    (keyup.enter)="updateTitleData($event, i ,titleInput)"
                />
                <ng-template #titleLabel>
                    <span>
                        {{element.title}}
                    </span>
                </ng-template>
            </td>
        </ng-container>
        <ng-container matColumnDef="assignee">
            <th
                scope="col"
                mat-header-cell
                *matHeaderCellDef
            > Assignee </th>
            <td
                mat-cell
                *matCellDef="let element"
                (click)="selectCell('assignee', element.assignee)"
                [ngClass]="{'active-element': currentValue === element?.assignee && currentCol === 'assignee'}"
            > {{element.assignee}} </td>
        </ng-container>
        <ng-container matColumnDef="dueDate">
            <th
                scope="col"
                mat-header-cell
                *matHeaderCellDef
            > Due Date </th>
            <td
                mat-cell
                *matCellDef="let element"
                (click)="selectCell('dueDate', element.dueDate)"
                [ngClass]="{'active-element': currentValue === element?.dueDate && currentCol === 'dueDate'}"
            > {{element.dueDate}} </td>
        </ng-container>
        <ng-container matColumnDef="priority">
            <th
                scope="col"
                mat-header-cell
                *matHeaderCellDef
            > Priority </th>
            <td
                mat-cell
                *matCellDef="let element"
                (click)="selectCell('priority', element.priority)"
                [ngClass]="{'active-element': currentValue === element?.priority && currentCol === 'priority'}"
            > {{element.priority}} </td>
        </ng-container>
        <ng-container matColumnDef="tags">
            <th
                scope="col"
                mat-header-cell
                *matHeaderCellDef
            > Tags </th>
            <td
                mat-cell
                *matCellDef="let element"
                (click)="selectCell('tags', element.tags)"
                [ngClass]="{'active-element': currentValue === element?.tags && currentCol === 'tags'}"
            > {{element.tags}} </td>
        </ng-container>
    </table>
</div>